###############################################################################
# AUTHELIA CORE CONFIGURATION
###############################################################################

theme: auto
default_redirection_url: https://{{ domain_name }}/

server:
  address: unix:///run/authelia/authelia.sock

log:
  level: info
  format: text

###############################################################################
# TOTP / 2FA (OPTIONAL â€” ENABLE LATER IF NEEDED)
###############################################################################
totp:
  issuer: {{ domain_name }}

###############################################################################
# AUTHENTICATION BACKEND
###############################################################################
authentication_backend:
  password_reset:
    disable: true

  file:
    path: /config/users_database.yml
    password:
      algorithm: argon2id
      iterations: 3
      memory: 65536
      parallelism: 4
      key_length: 32
      salt_length: 16

###############################################################################
# ACCESS CONTROL
###############################################################################
access_control:
  default_policy: deny
  rules:
    - domain: {{ domain_name }}
      policy: one_factor

###############################################################################
# SESSION MANAGEMENT
###############################################################################
session:
  name: authelia_session
  expiration: 12h
  inactivity: 30m
  remember_me_duration: 7d
  cookies:
    - domain: {{ domain_name }}
      authelia_url: https://{{ domain_name }}/authelia

###############################################################################
# REGULATION
###############################################################################
regulation:
  max_retries: 5
  find_time: 2m
  ban_time: 15m

###############################################################################
# STORAGE
###############################################################################
storage:
  encryption_key: "{{ lookup('file', authelia_storage_secret) }}"
  local:
    path: /data/authelia.sqlite3

###############################################################################
# SECRETS
###############################################################################
jwt_secret: "{{ lookup('file', authelia_jwt_secret) }}"

session:
  secret: "{{ lookup('file', authelia_session_secret) }}"

###############################################################################
# NOTIFIER
###############################################################################
notifier:
  disable_startup_check: true
  filesystem:
    filename: /data/notification.txt
